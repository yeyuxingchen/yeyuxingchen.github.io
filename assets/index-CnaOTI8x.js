
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as y,t as J,u as T,n as de,p as W,c as ue,q as Z,e as v,o as u,w as _,r as x,g as a,bc as fe,C as V,m as L,bd as pe,Q as M,R as O,be,bf as _e,bg as me,bh as he,bi as ge,bj as ve,b as w,v as ee,G as P,k as $,bk as ye,P as xe,a0 as D,y as A,D as G,$ as Ce,aX as ke,f as E,a1 as U,S as te,Y as ae,L as j,bl as se,a3 as ne,a4 as oe,as as N,a2 as Ie,bm as $e,aP as K,ax as H,x as Pe,H as S,j as X,ay as Be,X as Se,K as we,i as Me,O as Oe,aw as Re,a5 as Te}from"./index-DEvcBNPV.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-CpnwxH0O.js";import{u as q}from"./index-C-SuObNr.js";import{u as De}from"./useMainPage-Du1cnNiX.js";const[le,Ee]=ue("ContextMenuRoot"),Le=y({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(r,{emit:o}){const e=r,s=o,{dir:n,modal:d}=J(e);T();const l=de(n),f=W(!1),h=W();return Ee({open:f,onOpenChange:p=>{f.value=p},dir:l,modal:d,triggerElement:h}),Z(f,p=>{s("update:open",p)}),(p,k)=>(u(),v(a(fe),{open:f.value,"onUpdate:open":k[0]||(k[0]=I=>f.value=I),dir:a(l),modal:a(d)},{default:_(()=>[x(p.$slots,"default")]),_:3},8,["open","dir","modal"]))}}),ze=y({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{default:0},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(r,{emit:o}){const n=V(r,o);T();const d=le(),l=W(!1);return(f,h)=>(u(),v(a(pe),L(a(n),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:h[0]||(h[0]=p=>{!p.defaultPrevented&&l.value&&p.preventDefault(),l.value=!1}),onInteractOutside:h[1]||(h[1]=p=>{p.detail.originalEvent.button===2&&p.target===a(d).triggerElement.value&&p.preventDefault(),!p.defaultPrevented&&!a(d).modal.value&&(l.value=!0)})}),{default:_(()=>[x(f.$slots,"default")]),_:3},16))}}),je=y({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return T(),(e,s)=>(u(),v(a(be),M(O(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),We=y({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(r,{emit:o}){const e=r,n=_e(o);return T(),(d,l)=>(u(),v(a(me),M(O({...e,...a(n)})),{default:_(()=>[x(d.$slots,"default")]),_:3},16))}}),Ae=y({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return T(),(e,s)=>(u(),v(a(he),M(O(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Ne=y({__name:"ContextMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(r){const o=r;return(e,s)=>(u(),v(a(ge),M(O(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Ve=y({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return T(),(e,s)=>(u(),v(a(ve),M(O(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}});function Y(r){return r.pointerType!=="mouse"}const Ge=y({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"span"}},setup(r){const o=r,{disabled:e}=J(o),{forwardRef:s,currentElement:n}=T(),d=le(),l=W({x:0,y:0}),f=w(()=>({getBoundingClientRect:()=>({width:0,height:0,left:l.value.x,right:l.value.x,top:l.value.y,bottom:l.value.y,...l.value})})),h=W(0);function p(){window.clearTimeout(h.value)}function k(t){l.value={x:t.clientX,y:t.clientY},d.onOpenChange(!0)}async function I(t){e.value||(await A(),t.defaultPrevented||(p(),k(t),t.preventDefault()))}async function R(t){e.value||(await A(),Y(t)&&!t.defaultPrevented&&(p(),h.value=window.setTimeout(()=>k(t),700)))}async function i(t){e.value||(await A(),Y(t)&&!t.defaultPrevented&&p())}return ee(()=>{n.value&&(d.triggerElement.value=n.value)}),(t,c)=>(u(),P(D,null,[$(a(ye),{as:"template",reference:f.value},null,8,["reference"]),$(a(xe),L({ref:a(s),as:t.as,"as-child":t.asChild,"data-state":a(d).open.value?"open":"closed","data-disabled":a(e)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},t.$attrs,{onContextmenu:I,onPointerdown:R,onPointermove:i,onPointercancel:i,onPointerup:i}),{default:_(()=>[x(t.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),Ke=y({__name:"ContextMenu",props:{dir:{},modal:{type:Boolean}},emits:["update:open"],setup(r,{emit:o}){const n=V(r,o);return(d,l)=>(u(),v(a(Le),M(O(a(n))),{default:_(()=>[x(d.$slots,"default")]),_:3},16))}}),Ue=y({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(r,{emit:o}){const e=r,s=o,n=w(()=>{const{class:l,...f}=e;return f}),d=V(n,s);return(l,f)=>(u(),v(a(Ne),null,{default:_(()=>[$(a(ze),L(a(d),{class:a(G)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:_(()=>[x(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),He=y({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(r){const o=r;return(e,s)=>(u(),v(a(je),M(O(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Xe=y({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{},inset:{type:Boolean}},emits:["select"],setup(r,{emit:o}){const e=r,s=o,n=w(()=>{const{class:l,...f}=e;return f}),d=V(n,s);return(l,f)=>(u(),v(a(We),L(a(d),{class:a(G)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l.inset&&"pl-8",e.class)}),{default:_(()=>[x(l.$slots,"default")]),_:3},16,["class"]))}}),qe=y({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{},inset:{type:Boolean}},setup(r){const o=r,e=w(()=>{const{class:s,...n}=o;return n});return(s,n)=>(u(),v(a(Ae),L(e.value,{class:a(G)("px-2 py-1.5 text-sm font-semibold text-foreground",s.inset&&"pl-8",o.class)}),{default:_(()=>[x(s.$slots,"default")]),_:3},16,["class"]))}}),Q=y({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(r){const o=r,e=w(()=>{const{class:s,...n}=o;return n});return(s,n)=>(u(),v(a(Ve),L(e.value,{class:a(G)("-mx-1 my-1 h-px bg-border",o.class)}),null,16,["class"]))}}),Ye=y({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(r){const e=Ce(r);return(s,n)=>(u(),v(a(Ge),M(O(a(e))),{default:_(()=>[x(s.$slots,"default")]),_:3},16))}}),Qe={key:0,class:"size-4 flex-center"},Je=y({name:"FaContextMenu",__name:"index",props:{items:{}},setup(r){const o=r,e=ke(),s=w(()=>o.items.map(l=>l.filter(f=>!f.hide)).filter(l=>l.length)),n=w(()=>s.value.some(l=>l.some(f=>f.icon)));function d(l){var f;(f=l.handle)==null||f.call(l)}return(l,f)=>{const h=ae;return u(),v(a(Ke),{modal:!1},{default:_(()=>[$(a(Ye),{"as-child":""},{default:_(()=>[x(l.$slots,"default")]),_:3}),$(a(Ue),{class:"z-2050"},{default:_(()=>[e.label?(u(),P(D,{key:0},[$(a(qe),null,{default:_(()=>[x(l.$slots,"label")]),_:3}),$(a(Q))],64)):E("",!0),(u(!0),P(D,null,U(a(s),(p,k)=>(u(),P(D,{key:k},[$(a(He),null,{default:_(()=>[(u(!0),P(D,null,U(p,(I,R)=>(u(),v(a(Xe),{key:R,disabled:I.disabled,class:"cursor-pointer",onClick:i=>d(I)},{default:_(()=>[a(n)?(u(),P("div",Qe,[I.icon?(u(),v(h,{key:0,name:I.icon,class:"size-4"},null,8,["name"])):E("",!0)])):E("",!0),te(" "+j(I.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:2},1024),k!==a(s).length-1?(u(),v(a(Q),{key:0})):E("",!0)],64))),128))]),_:3})]),_:3})}}});function Ze(){const r=ne(),o=oe(),e=se();function s(){return r.fullPath}function n(i){const t=s();o.push(i).then(()=>{e.remove(t)})}function d(i=s()){if(p(i,!1)){const t=s();if(i===t){const c=e.list.findIndex(g=>g.tabId===i);c>0?n(e.list[c-1].fullPath):n(e.list[c+1].fullPath)}else e.remove(i)}}function l(i=s()){const t=s();if(i!==t){const c=e.list.findIndex(g=>g.tabId===i);o.push(e.list[c].fullPath)}e.removeOtherSide(i)}function f(i=s()){const t=s();if(i!==t){const c=e.list.findIndex(b=>b.tabId===i);e.list.findIndex(b=>b.tabId===t)<c&&o.push(e.list[c].fullPath)}e.removeLeftSide(i)}function h(i=s()){const t=s();if(i!==t){const c=e.list.findIndex(b=>b.tabId===i);e.list.findIndex(b=>b.tabId===t)>c&&o.push(e.list[c].fullPath)}e.removeRightSide(i)}function p(i=s(),t=!0){let c=!0;return e.list.findIndex(b=>b.tabId===i)<0?(c=!1,!t&&N.warning("关闭的标签页不存在",{position:"top-center"})):e.list.length<=1&&(c=!1,!t&&N.warning("当前只有一个标签页，不可关闭",{position:"top-center"})),c}function k(i=s()){return e.list.some(t=>t.tabId!==i)}function I(i=s()){var c;let t=!0;if(i===((c=e.list[0])==null?void 0:c.tabId))t=!1;else{const g=e.list.findIndex(b=>b.tabId===i);t=e.list.some((b,C)=>C<g&&b.tabId!==i)}return t}function R(i=s()){var c;let t=!0;if(i===((c=e.list.at(-1))==null?void 0:c.tabId))t=!1;else{const g=e.list.findIndex(b=>b.tabId===i);t=e.list.some((b,C)=>C>=g&&b.tabId!==i)}return t}return{getId:s,close:n,closeById:d,closeOtherSide:l,closeLeftSide:f,closeRightSide:h,checkClose:p,checkCloseOtherSide:k,checkCloseLeftSide:I,checkCloseRightSide:R}}const et={class:"tabbar"},tt={class:"tabbar-container"},at=["data-index","onClick"],st={class:"size-full"},nt={class:"tab-content"},ot=["onClick"],lt={class:"text-sm"},it={class:"text-accent-foreground/50"},rt=y({name:"Tabbar",__name:"index",setup(r){const o=ne(),e=oe(),s=Ie(),n=se(),d=Ze(),l=De(),f=$e({reactive:!0}),h=w(()=>d.getId()),p=K("tabsRef"),k=K("tabContainerRef"),I=K("tabRef");Z(()=>o,t=>{s.settings.tabbar.enable&&(n.add(t),A(()=>{var g,b,C,B;const c=n.list.findIndex(m=>m.tabId===h.value);if(c!==-1){const m=(g=I.value)==null?void 0:g.find(z=>Number.parseInt(z.dataset.index)===c),F=(C=(b=p.value)==null?void 0:b.ref)==null?void 0:C.$el;if(m&&F){const z=m.offsetLeft,ie=m.offsetWidth,re=F.clientWidth,ce=z-(re-ie)/2;(B=p.value)==null||B.scrollTo(ce)}R()}}))},{immediate:!0,deep:!0});function R(){var t,c,g;if(((t=k.value)==null?void 0:t.$el.clientWidth)>(((g=(c=p.value)==null?void 0:c.ref)==null?void 0:g.$el.clientWidth)??0)&&localStorage.getItem("tabbarScrollTip")===void 0){localStorage.setItem("tabbarScrollTip","");const b=N.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>N.dismiss(b)}})}}function i(t){return[[{label:"重新加载",icon:"i-ri:refresh-line",disabled:t.tabId!==h.value,handle:()=>l.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:n.list.length<=1,handle:()=>d.closeById(t.tabId)}],[{label:"关闭其他标签页",disabled:!d.checkCloseOtherSide(t.tabId),handle:()=>d.closeOtherSide(t.tabId)},{label:"关闭左侧标签页",disabled:!d.checkCloseLeftSide(t.tabId),handle:()=>d.closeLeftSide(t.tabId)},{label:"关闭右侧标签页",disabled:!d.checkCloseRightSide(t.tabId),handle:()=>d.closeRightSide(t.tabId)}]]}return ee(()=>{H("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(t,c)=>{var g,b;if(s.settings.tabbar.enable&&s.settings.tabbar.enableHotkeys)switch(t.preventDefault(),c.key){case"alt+left":if(n.list[0].tabId!==h.value){const C=n.list.findIndex(B=>B.tabId===h.value);e.push(n.list[C-1].fullPath)}break;case"alt+right":if(((g=n.list.at(-1))==null?void 0:g.tabId)!==h.value){const C=n.list.findIndex(B=>B.tabId===h.value);e.push(n.list[C+1].fullPath)}break;case"alt+w":d.closeById(h.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const C=Number(c.key.split("+")[1]);(b=n.list[C-1])!=null&&b.fullPath&&e.push(n.list[C-1].fullPath);break}case"alt+0":e.push(n.list[n.list.length-1].fullPath);break}})}),Pe(()=>{H.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(t,c)=>{const g=ae,b=Fe,C=Je,B=Re;return u(),P("div",et,[(u(),v(X(a(q)("tabbar-start")))),S("div",tt,[$(B,{ref_key:"tabsRef",ref:p,scrollbar:!1,mask:"",horizontal:"","gradient-color":"var(--g-tabbar-bg)",class:"tabs"},{default:_(()=>[$(Be,{ref_key:"tabContainerRef",ref:k,name:"tabbar",tag:"div",class:"tab-container"},{default:_(()=>[(u(!0),P(D,null,U(a(n).list,(m,F)=>(u(),P("div",{key:m.tabId,ref_for:!0,ref_key:"tabRef",ref:I,"data-index":F,class:Se(["tab",{actived:m.tabId===a(h)}]),onClick:z=>a(e).push(m.fullPath)},[$(C,{items:i(m)},{default:_(()=>[S("div",st,[c[0]||(c[0]=S("div",{class:"tab-dividers"},null,-1)),c[1]||(c[1]=S("div",{class:"tab-background"},null,-1)),$(b,{delay:1e3,side:"bottom"},{content:_(()=>[S("div",lt,j(typeof(m==null?void 0:m.title)=="function"?m.title():m.title),1),S("div",it,j(m.fullPath),1)]),default:_(()=>[S("div",nt,[(u(),P("div",{key:m.tabId,class:"title"},[a(s).settings.tabbar.enableIcon&&m.icon?(u(),v(g,{key:0,name:m.icon,class:"icon"},null,8,["name"])):E("",!0),te(" "+j(typeof(m==null?void 0:m.title)=="function"?m.title():m.title),1)])),a(n).list.length>1?(u(),P("div",{key:0,class:"action-icon",onClick:Me(z=>a(d).closeById(m.tabId),["stop"])},[$(g,{name:"i-ri:close-fill"})],8,ot)):E("",!0),we(S("div",{class:"hotkey-number"},j(F+1),513),[[Oe,a(f).alt&&F<9]])])]),_:2},1024)])]),_:2},1032,["items"])],10,at))),128))]),_:1},512)]),_:1},512)]),(u(),v(X(a(q)("tabbar-end"))))])}}}),pt=Te(rt,[["__scopeId","data-v-6a12e9cb"]]);export{pt as default};
