
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{B as Z,d as C,C as ee,e as c,o as l,g as t,b3 as ae,Q as oe,R as se,w as r,r as x,b as P,aP as W,b4 as ne,q,b5 as le,k as b,T as ie,m as S,G as Y,f as g,X as y,D as v,aH as re,b6 as ce,H as j,b7 as de,b8 as ue,$ as te,b9 as fe,ba as pe,p as F,ac as me,v as ge,az as ye,ah as ve,bb as G,aX as he,av as _e,S as V,Y as be,L as H,aw as xe,K as Be,O as ke,U as we,I as Ce,y as ze,aK as $e}from"./index-DEvcBNPV.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Z("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Z("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),Oe=C({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:i}){const o=ee(s,i);return(n,h)=>(l(),c(t(ae),oe(se(t(o))),{default:r(()=>[x(n.$slots,"default")]),_:3},16))}}),Ee=["data-modal-id"],Fe={class:"absolute inset-e-4 top-4 flex-center gap-2"},Pe=C({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{},open:{type:Boolean},maximize:{type:Boolean},maximizable:{type:Boolean},closable:{type:Boolean},overlay:{type:Boolean},overlayBlur:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","toggleMaximize","animationEnd"],setup(s,{expose:i,emit:d}){const e=s,o=d,n=P(()=>{const{class:f,...p}=e;return p}),h=ee(n,o);function z(){o("toggleMaximize",!e.maximize)}const B=W("dialogContentRef");i({el:B});const _=P(()=>e.open&&e.overlay),u=ne(document.body);q(_,f=>{f?u.value=!0:u.value=!1});const m=re("ModalId");return(f,p)=>(l(),c(t(le),null,{default:r(()=>[b(ie,S({enterActiveClass:"ease-in-out duration-300",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in-out duration-300",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},{appear:!0}),{default:r(()=>[_.value?(l(),Y("div",{key:0,"data-modal-id":t(m),class:y(t(v)("fixed inset-0 z-2000 data-[state=closed]:animate-out data-[state=open]:animate-in bg-black/50 data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",{"backdrop-blur-sm":e.overlayBlur}))},null,10,Ee)):g("",!0)]),_:1},16),b(t(ce),S({ref_key:"dialogContentRef",ref:B},t(h),{class:t(v)("fixed left-1/2 top-1/2 z-2000 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-0 data-[state=closed]:slide-out-to-top-1/5 data-[state=open]:slide-in-from-left-0 data-[state=open]:slide-in-from-top-1/5 sm:rounded-lg",e.class),onAnimationend:p[0]||(p[0]=k=>o("animationEnd"))}),{default:r(()=>[x(f.$slots,"default"),j("div",Fe,[e.maximizable?(l(),Y("button",{key:0,class:"hidden rounded-sm bg-transparent opacity-70 ring-offset-background transition-opacity disabled:pointer-events-none sm:inline-block data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ring",onClick:z},[e.maximize?(l(),c(t(De),{key:1,class:"h-4 w-4"})):(l(),c(t(Me),{key:0,class:"h-4 w-4"}))])):g("",!0),f.closable?(l(),c(t(de),{key:1,class:"rounded-sm bg-transparent opacity-70 ring-offset-background transition-opacity disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ring"},{default:r(()=>[b(t(ue),{class:"h-4 w-4"}),p[1]||(p[1]=j("span",{class:"sr-only"},"Close",-1))]),_:1,__:[1]})):g("",!0)])]),_:3},16,["class"])]),_:3}))}}),Q=C({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(s){const i=s,d=P(()=>{const{class:o,...n}=i;return n}),e=te(d);return(o,n)=>(l(),c(t(fe),S(t(e),{class:t(v)("text-sm text-muted-foreground",i.class)}),{default:r(()=>[x(o.$slots,"default")]),_:3},16,["class"]))}}),Te=C({__name:"DialogFooter",props:{class:{}},setup(s){const i=s;return(d,e)=>(l(),Y("div",{class:y(t(v)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",i.class))},[x(d.$slots,"default")],2))}}),Le=C({__name:"DialogHeader",props:{class:{}},setup(s){const i=s;return(d,e)=>(l(),Y("div",{class:y(t(v)("flex flex-col gap-y-1.5 text-center sm:text-start",i.class))},[x(d.$slots,"default")],2))}}),J=C({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(s){const i=s,d=P(()=>{const{class:o,...n}=i;return n}),e=te(d);return(o,n)=>(l(),c(t(pe),S(t(e),{class:t(v)("text-lg font-semibold tracking-tight",i.class)}),{default:r(()=>[x(o.$slots,"default")]),_:3},16,["class"]))}});function Ae(s,i,d,e){const o=F(!1),n=me({offsetX:0,offsetY:0}),h=u=>{const m=u.clientX,f=u.clientY,{offsetX:p,offsetY:k}=n,w=s.value.getBoundingClientRect(),$=w.left,T=w.top,I=w.width,M=w.height,L=document.documentElement.clientWidth,K=document.documentElement.clientHeight,N=-$+p,U=-T+k,a=L-$-I+p,D=K-T-M+k,O=E=>{let R=p+E.clientX-m,X=k+E.clientY-f;R=Math.min(Math.max(R,N),a),X=Math.min(Math.max(X,U),D),n.offsetX=R,n.offsetY=X,s.value&&(o.value=!0,s.value.style.transform=`translate(${R}px, ${X}px)`)},A=()=>{o.value=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",A)},z=()=>{const u=G(i);u&&s.value&&u.addEventListener("mousedown",h)},B=()=>{const u=G(i);u&&s.value&&u.removeEventListener("mousedown",h)},_=()=>{n.offsetX=0,n.offsetY=0,s.value&&(s.value.style.transform="none")};return ge(()=>{ye(()=>{d.value?z():B()})}),ve(()=>{B()}),{isDragging:o,transform:n,resetPosition:_}}const Re={class:"absolute inset-0 z-1000 size-full flex-center bg-popover/75"},Ve=C({name:"FaModal",__name:"index",props:{modelValue:{type:Boolean,default:!1},title:{},description:{},icon:{},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maximize:{type:Boolean,default:!1},maximizable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},alignCenter:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayBlur:{type:Boolean,default:!1},showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!1},confirmButtonText:{default:"确定"},cancelButtonText:{default:"取消"},confirmButtonDisabled:{type:Boolean,default:!1},confirmButtonLoading:{type:Boolean,default:!1},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},class:{},headerClass:{},contentClass:{},footerClass:{}},emits:["update:modelValue","open","opened","close","closed","confirm","cancel"],setup(s,{expose:i,emit:d}){const e=s,o=d,n=he(),h=W("dialogContentRef"),z=F(),B=W("dialogAreaRef"),_=F();i({areaRef:B});const u=Ce();$e("ModalId",u);const m=F(e.modelValue),f=F(e.maximize);q(()=>e.modelValue,a=>{m.value=a});const{isDragging:p,transform:k}=Ae(_,z,P(()=>e.draggable&&e.header&&!f.value));function w(){f.value?_.value.style.transform="none":_.value.style.transform=`translate(${k.offsetX}px, ${k.offsetY}px)`}q(m,a=>{a&&ze(()=>{var D;h.value&&(_.value=(D=h.value.el)==null?void 0:D.$el,w())})});function $(a){m.value=a,o("update:modelValue",a),o(a?"open":"close")}function T(){$(!1),o("confirm")}function I(){$(!1),o("cancel")}function M(a){a.preventDefault(),a.stopPropagation()}function L(a){(!e.closeOnClickOverlay||a.target.dataset.modalId!==u)&&(a.preventDefault(),a.stopPropagation())}function K(a){e.closeOnPressEscape||(a.preventDefault(),a.stopPropagation())}function N(a){f.value=a,w()}function U(){m.value?o("opened"):o("closed")}return(a,D)=>{const O=be,A=xe,E=we;return l(),c(t(Oe),{modal:!1,open:t(m),"onUpdate:open":$},{default:r(()=>[b(t(Pe),{ref_key:"dialogContentRef",ref:h,open:t(m),closable:e.closable,overlay:e.overlay,"overlay-blur":e.overlayBlur,maximize:t(f),maximizable:e.maximizable,class:y(t(v)("left-0 right-0 top-0 md:top-[5vh] flex flex-col p-0 gap-0 mx-auto h-[calc-size(auto,size)] min-h-full md:min-h-auto max-h-full md:max-h-[90vh] translate-x-0 translate-y-0",e.class,{"md:top-0 size-full max-w-full max-h-full md:max-h-full":t(f),"md:top-1/2 md:-translate-y-1/2!":e.alignCenter,"duration-0":t(p)})),onOpenAutoFocus:M,onCloseAutoFocus:M,onFocusOutside:M,onPointerDownOutside:L,onInteractOutside:L,onEscapeKeyDown:K,onToggleMaximize:N,onAnimationEnd:U},{default:r(()=>[a.header?(l(),c(t(Le),{key:0,ref_key:"dialogHeaderRef",ref:z,class:y(t(v)("p-4",e.headerClass,{"cursor-move select-none":e.draggable,"border-b":e.border}))},{default:r(()=>[n.header?(l(),c(t(_e),{key:0},{default:r(()=>[b(t(J)),b(t(Q))]),_:1})):g("",!0),x(a.$slots,"header",{},()=>[b(t(J),{class:y(["flex-center gap-x-2 md:justify-start",{"md:justify-center":e.center}])},{default:r(()=>[e.icon?(l(),c(O,{key:0,name:{info:"i-ant-design:info-circle-filled",success:"i-ant-design:check-circle-filled",warning:"i-ant-design:exclamation-circle-filled",error:"i-ant-design:close-circle-filled"}[e.icon],class:y(["size-6",{"text-blue-600 dark:text-blue-400":e.icon==="info","text-green-600 dark:text-green-400":e.icon==="success","text-yellow-600 dark:text-yellow-400":e.icon==="warning","text-red-600 dark:text-red-400":e.icon==="error"}])},null,8,["name","class"])):g("",!0),V(" "+H(a.title),1)]),_:1},8,["class"]),b(t(Q),{class:y(["empty:hidden",{"text-center":e.center}])},{default:r(()=>[V(H(a.description),1)]),_:1},8,["class"])])]),_:3},8,["class"])):g("",!0),n.default?(l(),c(A,{key:1,ref_key:"dialogAreaRef",ref:B,class:"flex-1"},{default:r(()=>[j("div",{class:y(t(v)("min-h-40 p-4",e.contentClass))},[x(a.$slots,"default")],2),Be(j("div",Re,[b(O,{name:"i-line-md:loading-twotone-loop",class:"size-10"})],512),[[ke,e.loading]])]),_:3},512)):g("",!0),a.footer?(l(),c(t(Te),{key:2,class:y(t(v)("p-2 gap-y-2",e.footerClass,{"md:justify-center":e.center,"border-t":e.border}))},{default:r(()=>[x(a.$slots,"footer",{},()=>[a.showCancelButton?(l(),c(E,{key:0,variant:"outline",onClick:I},{default:r(()=>[V(H(a.cancelButtonText),1)]),_:1})):g("",!0),a.showConfirmButton?(l(),c(E,{key:1,disabled:a.confirmButtonDisabled,loading:a.confirmButtonLoading,onClick:T},{default:r(()=>[V(H(a.confirmButtonText),1)]),_:1},8,["disabled","loading"])):g("",!0)])]),_:3},8,["class"])):g("",!0)]),_:3},8,["open","closable","overlay","overlay-blur","maximize","maximizable","class"])]),_:3},8,["open"])}}});export{Ve as _};
